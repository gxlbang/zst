@{
    ViewBag.Title = "完善信息";
    Layout = "~/Views/Shared/_Partial.cshtml";
}
<script src="~/Content/Scripts/uijs/checkFileTypeAndSize.js"></script>
<script>
    $(function () {
        $('.in-la img').jqthumb({
            width: 3,
            height: 3,
        });
        $("#imguploadimg1").checkFileTypeAndSize({
            allowedExtensions: ['jpg', 'jpeg', 'gif', 'png'],
            maxSize: 1024, //最大允许1024KB，即1MB
            success: function () {
                //上传文件数据准备
                var fd = new FormData();
                fd.append('image', $('#imguploadimg1')[0].files[0]);
                $.ajax({
                    url: '@Url.Action("UploadFile","Ui")',
                    type: "POST",
                    data: fd,
                    contentType: false,
                    cache: false,
                    processData: false,
                    dataType: 'json',
                    success: function (data) {
                        $.toast(data.message);
                        $("#HeadImg").val(data.filepath);
                        $("#hhimg1").attr("src", data.filepath);
                        $('.in-la img').jqthumb({
                            width: 3,
                            height: 3,
                        });
                    }
                });

            },
            extensionerror: function () {
                $.toast("允许的格式为：jpg,jpeg,gif,png");
                return;
            },
            sizeerror: function () {
                $.toast("最大尺寸1024KB,即1MB");
                return;
            }
        });
    });
</script>

<a href="javascript:;" class="edit bbot clear" id="edit">
    <span class="in-name fl">身份证</span><div class="edit-img fr">
        <img src="@ViewBag.User.HeadImg" alt="" id="HeadImgstr" />
    </div>
</a>